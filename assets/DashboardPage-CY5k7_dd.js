import{r as f,c as d,o as n,a as s,w as y,b as g,d as J,v as I,t as u,u as x,k as E,l as X,m as w,n as S,e as m,F as j,p as G,U as R,i as B}from"./index-2DRtKDq1.js";import{u as h}from"./campaigns-DDFTsJkA.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"modal"},P={class:"form-group"},V={key:0,class:"error-message"},A={class:"modal-actions"},T=["disabled"],F={__name:"CreateCampaignModal",emits:["close","created"],setup(k,{emit:b}){const v=b,i=h(),o=f(""),c=f(!1),l=f("");async function _(){if(!o.value.trim()){l.value="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¸";return}c.value=!0,l.value="";try{const a=await i.createCampaign(o.value);v("created",a),v("close")}catch(a){l.value=a.message}finally{c.value=!1}}return(a,e)=>(n(),d("div",{class:"modal-overlay",onClick:e[3]||(e[3]=y(p=>a.$emit("close"),["self"]))},[s("div",D,[s("button",{class:"modal-close",onClick:e[0]||(e[0]=p=>a.$emit("close"))},"âœ•"),e[5]||(e[5]=s("div",{class:"modal-header"},[s("h2",null,"ðŸ—ºï¸ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸ÑŽ"),s("p",null,"ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ð½Ð¾Ð²Ð¾Ðµ Ð¿Ñ€Ð¸ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ")],-1)),s("form",{onSubmit:y(_,["prevent"]),class:"modal-form"},[s("div",P,[e[4]||(e[4]=s("label",{for:"campaignName"},"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¸",-1)),J(s("input",{id:"campaignName","onUpdate:modelValue":e[1]||(e[1]=p=>o.value=p),type:"text",placeholder:"Ð’Ð¾Ð»Ñ‡ÑŒÑ Ð“Ð¾Ñ€Ð°, ÐŸÐ¾Ð´Ð·ÐµÐ¼ÐµÐ»ÑŒÑ Ð£Ð¶Ð°ÑÐ°...",autofocus:""},null,512),[[I,o.value]])]),l.value?(n(),d("p",V,u(l.value),1)):g("",!0),s("div",A,[s("button",{type:"button",class:"btn-secondary",onClick:e[2]||(e[2]=p=>a.$emit("close"))}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),s("button",{type:"submit",class:"btn-primary",disabled:c.value},u(c.value?"Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼...":"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ"),9,T)])],32)])]))}},z=$(F,[["__scopeId","data-v-2849a1bf"]]),O={class:"modal"},W={class:"form-group"},Y={key:0,class:"error-message"},q={class:"modal-actions"},H=["disabled"],K={__name:"JoinCampaignModal",emits:["close","joined"],setup(k,{emit:b}){const v=b,i=h(),o=f(""),c=f(!1),l=f("");async function _(){if(!o.value.trim()){l.value="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ð´ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¸";return}c.value=!0,l.value="";try{const a=await i.joinCampaign(o.value);v("joined",a),v("close")}catch(a){l.value=a.message}finally{c.value=!1}}return(a,e)=>(n(),d("div",{class:"modal-overlay",onClick:e[4]||(e[4]=y(p=>a.$emit("close"),["self"]))},[s("div",O,[s("button",{class:"modal-close",onClick:e[0]||(e[0]=p=>a.$emit("close"))},"âœ•"),e[6]||(e[6]=s("div",{class:"modal-header"},[s("h2",null,"ðŸšª ÐŸÑ€Ð¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸Ñ‚ÑŒÑÑ"),s("p",null,"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ð´ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ñ Ð¾Ñ‚ Ð¼Ð°ÑÑ‚ÐµÑ€Ð°")],-1)),s("form",{onSubmit:y(_,["prevent"]),class:"modal-form"},[s("div",W,[e[5]||(e[5]=s("label",{for:"joinCode"},"ÐšÐ¾Ð´ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¸",-1)),J(s("input",{id:"joinCode","onUpdate:modelValue":e[1]||(e[1]=p=>o.value=p),type:"text",placeholder:"XXXXX",class:"code-input",maxlength:"5",autofocus:"",onInput:e[2]||(e[2]=p=>o.value=o.value.toUpperCase())},null,544),[[I,o.value]])]),l.value?(n(),d("p",Y,u(l.value),1)):g("",!0),s("div",q,[s("button",{type:"button",class:"btn-secondary",onClick:e[3]||(e[3]=p=>a.$emit("close"))}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),s("button",{type:"submit",class:"btn-primary",disabled:c.value},u(c.value?"Ð’Ñ…Ð¾Ð´Ð¸Ð¼...":"Ð’Ð¾Ð¹Ñ‚Ð¸"),9,H)])],32)])]))}},Q=$(K,[["__scopeId","data-v-67e35903"]]),Z={class:"dashboard"},ss={class:"dashboard-header"},es={class:"user-menu"},ts={class:"user-name"},os={class:"dashboard-content"},as={class:"welcome-section"},ns={key:0,class:"role-warning"},ls={class:"action-buttons"},is={key:0,class:"action-hint"},rs={key:1,class:"campaigns-section"},ds={class:"campaigns-list"},us={class:"campaign-info"},cs={class:"campaign-meta"},ms={class:"players-count"},ps={class:"join-code",title:"ÐšÐ¾Ð´ Ð´Ð»Ñ Ð¿Ñ€Ð¸ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ"},vs=["onClick"],gs={key:2,class:"campaigns-section"},fs={class:"campaigns-list"},Cs={class:"campaign-info"},_s={class:"campaign-meta"},bs={class:"master-name"},ys={class:"players-count"},hs=["onClick"],$s={key:3,class:"empty-state"},ks={__name:"DashboardPage",setup(k){const b=B(),v=x(),i=E(),o=h(),c=f(!1),l=f(!1),_=f(!1);function a(){if(!i.isGM){_.value=!0,setTimeout(()=>{_.value=!1},3e3);return}c.value=!0}X(()=>{o.subscribeToAllCampaigns()});async function e(){o.clearCampaigns(),await v.logout(),b.push("/login")}async function p(){if(!v.userId)return;const C=i.isGM?R.PLAYER:R.GM;await i.setRole(v.userId,C)}function L(C){console.log("Campaign created:",C)}function N(C){console.log("Joined campaign:",C)}function M(C){b.push(`/campaign/${C}`)}return(C,t)=>(n(),d("div",Z,[s("header",ss,[t[3]||(t[3]=s("div",{class:"logo"},[s("span",{class:"logo-icon"},"ðŸŒ²"),s("h1",null,"Ð¢Ð°Ð¹Ð½Ñ‹Ðµ Ð¢Ñ€Ð¾Ð¿Ñ‹")],-1)),s("div",es,[s("span",{class:S(["user-role",{"role-gm":m(i).isGM}])},u(m(i).isGM?"ðŸŽ­ Game Master":"âš”ï¸ Player"),3),s("span",ts,u(m(i).displayName),1),s("button",{onClick:p,class:"btn-role",title:"Ð¡Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ€Ð¾Ð»ÑŒ (Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð°)"}," ðŸ”„ "),s("button",{onClick:e,class:"btn-logout"}," Ð’Ñ‹Ð¹Ñ‚Ð¸ ")])]),s("main",os,[s("section",as,[s("h2",null,u(m(i).isGM?"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ, ÐœÐ°ÑÑ‚ÐµÑ€!":"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ, Ð˜ÑÐºÐ°Ñ‚ÐµÐ»ÑŒ!"),1),s("p",null,u(m(i).isGM?"Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸ÑŽ Ð¸Ð»Ð¸ Ð²Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð² ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÑƒÑŽ":"ÐŸÑ€Ð¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸Ñ‚ÐµÑÑŒ Ðº ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¸ Ð¸Ð»Ð¸ ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐ²Ð¾ÑŽ"),1)]),_.value?(n(),d("div",ns,[...t[4]||(t[4]=[s("span",null,"âš ï¸ Ð¢Ð¾Ð»ÑŒÐºÐ¾ Game Master Ð¼Ð¾Ð¶ÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¸. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¿Ð¾Ð¼ÐµÐ½ÑÐ¹Ñ‚Ðµ Ñ€Ð¾Ð»ÑŒ.",-1)])])):g("",!0),s("div",ls,[s("button",{class:S(["action-btn create",{disabled:!m(i).isGM}]),onClick:a},[t[5]||(t[5]=s("span",{class:"action-icon"},"ðŸ—ºï¸",-1)),t[6]||(t[6]=s("span",{class:"action-text"},"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸ÑŽ",-1)),m(i).isGM?g("",!0):(n(),d("span",is,"Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ GM"))],2),s("button",{class:"action-btn join",onClick:t[0]||(t[0]=r=>l.value=!0)},[...t[7]||(t[7]=[s("span",{class:"action-icon"},"ðŸšª",-1),s("span",{class:"action-text"},"ÐŸÑ€Ð¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸Ñ‚ÑŒÑÑ",-1)])])]),m(o).myCampaigns.length>0?(n(),d("section",rs,[t[8]||(t[8]=s("h3",null,"ðŸŽ­ ÐœÐ¾Ð¸ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¸ (ÐºÐ°Ðº Ð¼Ð°ÑÑ‚ÐµÑ€)",-1)),s("div",ds,[(n(!0),d(j,null,G(m(o).myCampaigns,r=>(n(),d("div",{key:r.id,class:"campaign-card master"},[s("div",us,[s("h4",null,u(r.name),1),s("p",cs,[s("span",ms,"ðŸ‘¥ "+u(r.players?.length||0)+" Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²",1),s("span",ps,"ðŸ”‘ "+u(r.joinCode),1)])]),s("button",{class:"btn-enter",onClick:U=>M(r.id)}," Ð’Ð¾Ð¹Ñ‚Ð¸ ",8,vs)]))),128))])])):g("",!0),m(o).joinedCampaigns.length>0?(n(),d("section",gs,[t[9]||(t[9]=s("h3",null,"âš”ï¸ ÐœÐ¾Ð¸ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¸ (ÐºÐ°Ðº Ð¸Ð³Ñ€Ð¾Ðº)",-1)),s("div",fs,[(n(!0),d(j,null,G(m(o).joinedCampaigns,r=>(n(),d("div",{key:r.id,class:"campaign-card player"},[s("div",Cs,[s("h4",null,u(r.name),1),s("p",_s,[s("span",bs,"ðŸŽ­ "+u(r.masterEmail?.split("@")[0]),1),s("span",ys,"ðŸ‘¥ "+u(r.players?.length||0)+" Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²",1)])]),s("button",{class:"btn-enter",onClick:U=>M(r.id)}," Ð’Ð¾Ð¹Ñ‚Ð¸ ",8,hs)]))),128))])])):g("",!0),m(o).myCampaigns.length===0&&m(o).joinedCampaigns.length===0?(n(),d("section",$s,[...t[10]||(t[10]=[s("div",{class:"empty-icon"},"ðŸ•ï¸",-1),s("h3",null,"ÐŸÐ¾ÐºÐ° Ð½ÐµÑ‚ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¹",-1),s("p",null,"Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐ²Ð¾ÑŽ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸ÑŽ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸Ñ‚ÐµÑÑŒ Ðº ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ¹ Ð¿Ð¾ ÐºÐ¾Ð´Ñƒ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ñ",-1)])])):g("",!0)]),c.value?(n(),w(z,{key:0,onClose:t[1]||(t[1]=r=>c.value=!1),onCreated:L})):g("",!0),l.value?(n(),w(Q,{key:1,onClose:t[2]||(t[2]=r=>l.value=!1),onJoined:N})):g("",!0)]))}},js=$(ks,[["__scopeId","data-v-41b8014d"]]);export{js as default};
